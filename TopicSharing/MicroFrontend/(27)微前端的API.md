# 前端也可以搞微服務？！前端最複雜的一種架構

## 微前端的 API

後端有 API，那前端呢？其實大部分我們可以認知的是走網路的 HTTP 協定 API，但其實廣義來說，API 這詞彙可以用在很多地方。微服務中，微前端仰賴 HTTP 協定建構 API 的溝通橋樑，那微前端呢？

### API 原則

要能作為良好的 API，穩定性很重要。那擁有最穩定的 API，長期也不容易發生異動，跨專案與環境都可以很好的支援的就是原生 API，不管是走網路協定還是 Browser API 都是很好的選擇。然而要很謹慎的地方是不要依賴「狀態」來溝通，因為會有同步的問題，最理想是依靠著「傳遞」來達到溝通的目的。

### 適合拿來當作 API 的方法

#### WebComponent

多半這會是許多微前端技術的首選，它可以傳遞字串、事件等多種資訊，具備懶加載特性，可以說是非常受歡迎。

#### CustomEvent

雖然 UI 的傳遞方式很好用，但很多情況有更純粹的事件應用場景。這時候需要 CustomEvent 作為廣播器，具備可插可拔極為彈性的 API 選擇。

### window variable

這很接近使用狀態機，不是這麼推薦，但操作的好也可以非常好用，比較不受規格限制。要特別注意要建立「修改時通知」的特性，傳遞給訂閱狀態的對象。

### Network

可以應用 HTTP Request + WebSocket，應用
